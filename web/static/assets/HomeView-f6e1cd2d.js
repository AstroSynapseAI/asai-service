import{g as L,l as G,_ as b,u as E,a as V,s as N,b as x,r as p,w as g,o as k,c as a,d as Y,e as H,f as e,h as z,i as F,j as X,k as t,m as P,F as D,n as q,p as K,q as Z,t as f,v as R,x as i,y as O,z as $,A as T,B as ee,C as te}from"./index-3bc6b851.js";const le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAC7CAYAAACtg5alAAAAAXNSR0IArs4c6QAABB50RVh0bXhmaWxlACUzQ214ZmlsZSUyMGhvc3QlM0QlMjJFbGVjdHJvbiUyMiUyMG1vZGlmaWVkJTNEJTIyMjAyMy0wNS0xMFQyMSUzQTE0JTNBMzcuODM0WiUyMiUyMGFnZW50JTNEJTIyNS4wJTIwKE1hY2ludG9zaCUzQiUyMEludGVsJTIwTWFjJTIwT1MlMjBYJTIwMTBfMTVfNyklMjBBcHBsZVdlYktpdCUyRjUzNy4zNiUyMChLSFRNTCUyQyUyMGxpa2UlMjBHZWNrbyklMjBkcmF3LmlvJTJGMTYuMS4yJTIwQ2hyb21lJTJGOTYuMC40NjY0LjU1JTIwRWxlY3Ryb24lMkYxNi4wLjUlMjBTYWZhcmklMkY1MzcuMzYlMjIlMjB2ZXJzaW9uJTNEJTIyMTYuMS4yJTIyJTIwZXRhZyUzRCUyMnFoZnRLTWQ4NjZPUkhWOFUzMW45JTIyJTIwdHlwZSUzRCUyMmRldmljZSUyMiUzRSUzQ2RpYWdyYW0lMjBpZCUzRCUyMk82T0VqLXJwYmJSYnoycHQ5YXI1JTIyJTNFN1ZaTmI0TXdEUDAxM0lGQWFZOWIxMjZYU1pWNjJEa2lIbVFMR0lYUWolMkYzNmhTWjhwTjNVcmRwNktoZmlGJTJGdlpzUjhSSHBrWHUwZEpxJTJGd1pHUWd2OU5uT0l3OWVHQWFCUDlHdkZ0a2JaRFpMREpCSnpxelRBS3o1QjFqUXQyakRHZFNPbzBJVWlsY3VtR0paUXFvY2pFcUpXOWZ0RllXYnRhSVpuQURybElwVDlJVXpsUnQwR2lZRCUyRmdROHk3dk13V1JtZGdyYU9kdVQxRGxsdUIxQlpPR1J1VVJVWmxYczVpRGE1blY5TVhITGIzYjd3aVNVNmljQm9RbllVTkhZczltNjFMNDdMSlRzcnUyWnRrb3NOWGlmcTBKb0s5QkxpVTNKb0NYenRWVXJLcFVkMTBUYk9uUms2YzBNMUFva0wwQ0JYRmMwNVdYV2gwcDhoemtLbEllMFpIbDQlMkJwMnV6eTNSVzFOVWExdWdMY2xVRGV4a2JrTWpncjY5V3BlQXVnYTUxeTdiWVlDeEhVbyUyQm1sMkhTUkJVOFkxTFQ2Mk9zcDZ1ejdCQ3JoT0h2dFU4aVlrSnNZcWZFTiUyQmxxTEdSS2RpbzhjRE9FRVh4RVpIdDhqR1JYb3lPUFVBSFBYeXREWExUeHBXMEVibmE2TzZSMzJvalNzNFElMkZaMDJvcHMycnFLTktQbWplJTJCT1k2QiUyRnZqZmltamV2Y0cxUDNjNCUyQm44WVhhaU00UVhhd05iUTclMkZNc1o5JTJCQ01raTA4JTNEJTNDJTJGZGlhZ3JhbSUzRSUzQyUyRm14ZmlsZSUzRXo0Vd8AAASaSURBVHhe7ZxRUhxXEARnTmbdTNLN7JOtQwqwFwUiAwjUPUnyqdrhvapMluVH59HXp17g/NTtK38kwCeX4Lzdbt/uNrgdx/9SnOd5n33yqa5Zn/g+CvD1mXrfE+Ca0O9v/SDAb/kmwPUZv9ggAeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKleAtBC8jwB5ICpXgLQQvI8AeSAqV4C0ELyPAHkgKneZQR4uOjtOI7zl1LP/dv9Syj/3Wsfn3vN87T3q/LzPL+96oE3vPhqAnx9Q8erPvI9Ae7QvWDqVQHTvRPgyXvz7fbj7bB3ANLmlXm/Al452B98ee8AvQP0IfA/Bx7eqv7gD+D8UX0InGegv8FlPgPoSQwVTICh4bccmwBbSAzdIwGGht9ybAJsITF0jwQYGn7LsQmwhcTQPRJgaPgtxybAFhJD90iAoeG3HJsAW0gM3SMBhobfcmwCbCExdI8EGBp+y7EJsIXE0D0SYGj4LccmwBYSQ/dIgKHhtxybAFtIDN0jAYaG33JsAmwhMXSPBBgafsuxCbCFxNA9EmBo+C3HJsAWEkP3SICh4bccmwBbSAzdIwGGht9ybAJsITF0jwQYGn7LsQmwhcTQPRJgaPgtxybAFhJD90iAoeG3HPseAf4+juOfLUW6x5sX+Os4ji/PPP3zfyk7XzDkzSf24CUWSIBLYPq4SybAx217ie+cAJfA9HGXTICP2/YS3/mJAPc3/vGp8fGrvwIuwfLFS97zfML1518B1+9Xg/cskADvWU/wbAIIIL6nwr+sixolUHBQyAAAAABJRU5ErkJggg==",se="/assets/user-icon-a729db5f.png",W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAArCAYAAAC91zLkAAAAAXNSR0IArs4c6QAABtF0RVh0bXhmaWxlACUzQ214ZmlsZSUyMGhvc3QlM0QlMjJFbGVjdHJvbiUyMiUyMG1vZGlmaWVkJTNEJTIyMjAyMy0xMS0wN1QxOCUzQTMzJTNBNTguNTI0WiUyMiUyMGFnZW50JTNEJTIyTW96aWxsYSUyRjUuMCUyMChNYWNpbnRvc2glM0IlMjBJbnRlbCUyME1hYyUyME9TJTIwWCUyMDEwXzE1XzcpJTIwQXBwbGVXZWJLaXQlMkY1MzcuMzYlMjAoS0hUTUwlMkMlMjBsaWtlJTIwR2Vja28pJTIwZHJhdy5pbyUyRjIyLjAuMyUyMENocm9tZSUyRjExNC4wLjU3MzUuMjg5JTIwRWxlY3Ryb24lMkYyNS44LjQlMjBTYWZhcmklMkY1MzcuMzYlMjIlMjB2ZXJzaW9uJTNEJTIyMjIuMC4zJTIyJTIwZXRhZyUzRCUyMkZVeGxIUDNDcnJoc2dFYWo0SVF1JTIyJTIwdHlwZSUzRCUyMmRldmljZSUyMiUzRSUwQSUyMCUyMCUzQ2RpYWdyYW0lMjBuYW1lJTNEJTIyUGFnZS0xJTIyJTIwaWQlM0QlMjI4ZF9taGozQVVEWXo5SkpuaGlCciUyMiUzRSUwQSUyMCUyMCUyMCUyMCUzQ214R3JhcGhNb2RlbCUyMGR4JTNEJTIyMTYzJTIyJTIwZHklM0QlMjIxNDYlMjIlMjBncmlkJTNEJTIyMSUyMiUyMGdyaWRTaXplJTNEJTIyMTAlMjIlMjBndWlkZXMlM0QlMjIxJTIyJTIwdG9vbHRpcHMlM0QlMjIxJTIyJTIwY29ubmVjdCUzRCUyMjElMjIlMjBhcnJvd3MlM0QlMjIxJTIyJTIwZm9sZCUzRCUyMjElMjIlMjBwYWdlJTNEJTIyMSUyMiUyMHBhZ2VTY2FsZSUzRCUyMjElMjIlMjBwYWdlV2lkdGglM0QlMjI4MjclMjIlMjBwYWdlSGVpZ2h0JTNEJTIyMTE2OSUyMiUyMG1hdGglM0QlMjIwJTIyJTIwc2hhZG93JTNEJTIyMCUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUzQ3Jvb3QlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteENlbGwlMjBpZCUzRCUyMjAlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0NteENlbGwlMjBpZCUzRCUyMjElMjIlMjBwYXJlbnQlM0QlMjIwJTIyJTIwJTJGJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhDZWxsJTIwaWQlM0QlMjIyJTIyJTIwdmFsdWUlM0QlMjIlMjIlMjBzdHlsZSUzRCUyMmVuZEFycm93JTNEbm9uZSUzQmh0bWwlM0QxJTNCcm91bmRlZCUzRDAlM0JzdHJva2VDb2xvciUzRCUyM0ZGRkZGRiUzQnN0cm9rZVdpZHRoJTNEMiUzQiUyMiUyMGVkZ2UlM0QlMjIxJTIyJTIwcGFyZW50JTNEJTIyMSUyMiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214R2VvbWV0cnklMjB3aWR0aCUzRCUyMjUwJTIyJTIwaGVpZ2h0JTNEJTIyNTAlMjIlMjByZWxhdGl2ZSUzRCUyMjElMjIlMjBhcyUzRCUyMmdlb21ldHJ5JTIyJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDbXhQb2ludCUyMHglM0QlMjI0MjAlMjIlMjB5JTNEJTIyNTIwJTIyJTIwYXMlM0QlMjJzb3VyY2VQb2ludCUyMiUyMCUyRiUzRSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQ214UG9pbnQlMjB4JTNEJTIyNDIwJTIyJTIweSUzRCUyMjQ4MCUyMiUyMGFzJTNEJTIydGFyZ2V0UG9pbnQlMjIlMjAlMkYlM0UlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZteEdlb21ldHJ5JTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGbXhDZWxsJTNFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGcm9vdCUzRSUwQSUyMCUyMCUyMCUyMCUzQyUyRm14R3JhcGhNb2RlbCUzRSUwQSUyMCUyMCUzQyUyRmRpYWdyYW0lM0UlMEElM0MlMkZteGZpbGUlM0UlMEE+N4yMAAAAK0lEQVQoU2NkQAKM////d2BgYADhAyBOAwMDQz0DA0PjKGekhQEiHSCnEABi/7exJRbwWgAAAABJRU5ErkJggg==";var ne=G;const oe=L(ne);const ae=c=>(Z("data-v-674aaf57"),c=c(),f(),c),Me=["disabled"],ie=ae(()=>e("i",{class:"align-middle","data-feather":"send"},null,-1)),ce=[ie],_=10,ye=46,v=300,re=4,Ae={__name:"PromptInput",props:{promptInput:{type:String,required:!1},conversationContainer:{type:Object,required:!1}},setup(c){const m=E(),y=V(),{isLoading:n}=N(y),r=c;let{resetForm:J,handleSubmit:h,defineField:Q}=x({initialValues:{prompt:""}});const[C,B]=Q("prompt"),A=p(null);let I=p(0),u=p(0);g(()=>r.promptInput,s=>{C.value=s,A.value.$el.focus()}),g(n,(s,o)=>{o===!0&&s===!1&&setTimeout(()=>{A.value.$el.focus()},0)});function S(){return parseInt(window.getComputedStyle(A.value.$el).getPropertyValue("line-height"))}function M(){return(A.value.$el.value.match(/\n/g)||[]).length}function U(s){let o=v+s;o=o>=v?o:v,r.conversationContainer.style.maxHeight=`calc(100vh - ${o}px)`}function l(){let s=M();if(s=s>_?_:s,s!=u.value){u.value=s;let o=s*I.value+I.value+re;A.value.$el.style.height=`${o}px`;let j=o-ye;U(j)}}const d=h((s,o)=>{if(s.prompt.trim()!==""){const j={session_id:m.session_id,avatar_id:m.avatar.ID,msg:s.prompt};J(),setTimeout(()=>{l(),y.sendPrompt(j)},0)}});return k(()=>{feather.replace(),I.value=S(),u.value=M()}),(s,o)=>(a(),Y(t(K),{onSubmit:t(d)},{default:H(()=>[e("div",{class:q([{"textarea-container":!0,loading:t(n),"form-control":!0},"form-control"])},[z(t(D),{onInput:l,onKeydown:F(X(t(d),["exact","prevent"]),["enter"]),name:"prompt",modelValue:t(C),"onUpdate:modelValue":o[0]||(o[0]=j=>P(C)?C.value=j:null),type:"text",as:"textarea",class:"",rows:"2",placeholder:"Send a message...",disabled:t(n),ref_key:"promptElement",ref:A},null,8,["onKeydown","modelValue","disabled"]),e("button",{class:"send-button btn btn-light",disabled:t(n)},ce,8,Me)],2)]),_:1},8,["onSubmit"]))}},Ie=b(Ae,[["__scopeId","data-v-674aaf57"]]);const w=c=>(Z("data-v-6f8aa03d"),c=c(),f(),c),Ue={class:"container-fluid"},de=w(()=>e("h1",{class:"h3 mb-3"},"Avatar",-1)),Te={class:"row"},Je={class:"col-12"},Ce={class:"card"},pe={class:"card-body"},we={class:"container d-flex flex-column"},ue={class:"col-1 d-flex flex-column"},je=["src"],me=["src"],he=["onClick","disabled"],Qe=w(()=>e("i",{class:"align-middle","data-feather":"refresh-cw"},null,-1)),ge=[Qe],Se=["onClick","disabled"],ve=w(()=>e("i",{class:"align-middle","data-feather":"edit"},null,-1)),Be=[ve],Re={class:"col-10"},_e={key:0},be=w(()=>e("span",{class:"me-3"},"I'm thinking... ",-1)),Ee={class:"spinner mb-2 me-2"},Ve={key:0,src:W,alt:""},Ne={key:0},ke={class:"me-3 fst-italic"},ze=w(()=>e("span",{class:"spinner mb-2 me-2"},[e("img",{src:W,alt:""})],-1)),Ze=["innerHTML"],fe={key:0,class:"separator opacity-100 mt-3"},We=w(()=>e("hr",{class:"border border-3 opacity-100"},null,-1)),Le={__name:"HomeView",setup(c){const m=ee(),y=V(),{messages:n}=N(y),r=E(),J=p(null),h=p(null),Q=p(""),C=new oe({breaks:!0}),B=R(()=>n.value.length-1),A=R(()=>{var M;return((M=n.value[B.value])==null?void 0:M.content)||""});async function I(){requestAnimationFrame(()=>{if(J.value){var M=h.value.offsetHeight+30,U=J.value.scrollHeight+M;J.value.scrollTop=U}})}g(n,()=>{I()}),g(A,()=>{I(),feather.replace()}),k(async()=>{try{r.session_id===null?await r.getSessionToken():await y.getPrivateSession(m.params.avatar_id,r.session_id)}catch(M){console.log(M)}I(),feather.replace(),y.connectWebSocket()});const u=function(U){const l=n.value[U]||{};y.sendPrompt({session_id:r.session_id,avatar_id:r.avatar.ID,msg:l.content||""})},S=function(U){const l=n.value[U]||{};Q.value=l.content||"",I()};return(M,U)=>(a(),i("div",Ue,[de,e("div",Te,[e("div",Je,[e("div",Ce,[e("div",pe,[e("div",we,[e("div",{ref_key:"conversationContainer",ref:J,class:"conversation-container flex-grow-1 overflow-auto"},[t(n).length>0?(a(!0),i(O,{key:0},$(t(n),(l,d)=>(a(),i("div",{class:"conversation-item row",key:d},[e("div",ue,[l.sender==="ai"?(a(),i("img",{key:0,src:t(le),class:"logo",alt:"Avatar Icon",width:"35"},null,8,je)):T("",!0),l.sender==="human"?(a(),i("img",{key:1,src:t(se),class:"logo",alt:"User Icon",width:"35",height:"50"},null,8,me)):T("",!0),l.sender==="ai"&&d+1==t(n).length?(a(),i("button",{key:2,onClick:()=>u(d-1),class:"retry-button btn mt-2 p-0",disabled:t(y).isLoading,title:"Regenerate prompt"},ge,8,he)):T("",!0),l.sender==="human"?(a(),i("button",{key:3,onClick:()=>S(d),class:"retry-button btn mt-2 p-0",disabled:t(y).isLoading,title:"Edit last prompt"},Be,8,Se)):T("",!0)]),e("div",Re,[l.isLoading?(a(),i("div",_e,[e("p",null,[be,e("span",Ee,[l.isAgentRunnig?T("",!0):(a(),i("img",Ve))])]),l.isAgentRunnig?(a(),i("p",Ne,[e("span",ke,"Activating agent: "+te(l.agentName)+"... ",1),ze])):T("",!0)])):(a(),i("div",{key:1,class:"message-content pe-3",innerHTML:t(C).render(l.content.trim())},null,8,Ze))]),t(n).length>1&&d!==t(n).length-1?(a(),i("hr",fe)):T("",!0)]))),128)):T("",!0)],512),e("div",{ref_key:"promptContainer",ref:h,class:"prompt-container"},[We,z(Ie,{promptInput:Q.value,conversationContainer:J.value},null,8,["promptInput","conversationContainer"])],512)])])])])])]))}},xe=b(Le,[["__scopeId","data-v-6f8aa03d"]]);export{xe as default};
