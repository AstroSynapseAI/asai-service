import{_ as y,E as D,G as A,D as C,r as n,I as M,o as x,x as p,f as s,C as g,M as T,N as S,h as V,k as B,y as E,z as N,B as R,O as $,c as f,J as q,q as G,t as O}from"./index-3bc6b851.js";import{u as z}from"./llm.store-5c66f981.js";import{u as F}from"./avatar.store-1b14be5f.js";const J=r=>(G("data-v-e3b6c18d"),r=r(),O(),r),P={class:"container-fluid p-0"},U={class:"h3 mb-3"},j={class:"row"},H={class:"col-12 card"},K={class:"card-body"},Q={class:"container"},W={class:"row"},X={class:"col-6"},Y={class:"form-floating mb-3"},Z=J(()=>s("label",{for:"floatingInput"},"Token*",-1)),ee={class:"col-6"},se={class:"row"},oe={class:"col-4"},te={class:"col-4"},ae={class:"form-check form-switch float-end me-5"},ce=["for"],re=["id","checked","onClick"],ie={__name:"ModelConfigView",setup(r){D({ApiToken:A().required()});const m=C(),a=R();$();const l=z(),d=F(),v=n(""),i=n(""),k=M(l,"records"),u=M(d,"activeLLMs"),c=n([]),_=n(),h=()=>{const e=a.params.provider.toLowerCase();return _.value=k.value.filter(o=>o.provider.toLowerCase()===e),_.value},L=e=>{const o=u.value.find(t=>t.llm.ID===e);return o?o.is_active:!1},I=e=>c.value.includes(e),w=async e=>{c.value.includes(e)?c.value=c.value.filter(o=>o!==e):c.value.push(e)},b=async()=>{try{for(const e of h()){const o=u.value.find(t=>t.llm.ID===e.ID);await l.saveLLM({ID:o?o.ID:void 0,token:i.value,avatar_id:parseInt(a.params.avatar_id),llm_id:e.ID,is_active:I(e.ID)})}await d.getActiveLLMs(a.params.avatar_id),m.success("Model configuration saved")}catch(e){console.log(e),m.error("Error while saving model configuration")}};return x(async()=>{a.params.provider==="openai"&&(v.value="GPT by OpenAI"),a.params.provider==="mistral"&&(v.value="Mistral by MistralAI");try{await l.getLLMs();for(const e of h())L(e.ID)&&c.value.push(e.ID);await d.getActiveLLMs(a.params.avatar_id);for(const e of u.value)if(e.llm.provider.toLowerCase()===a.params.provider&&e.token){i.value=e.token;break}}catch(e){console.log(e)}feather.replace()}),(e,o)=>(f(),p("div",P,[s("h1",U,"Configure: "+g(v.value),1),s("div",j,[s("div",H,[s("div",K,[s("div",Q,[s("div",W,[s("div",X,[s("div",Y,[T(s("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>i.value=t),type:"text",name:"ApiToken",class:"form-control",id:"floatingInput",placeholder:"Token..."},null,512),[[S,i.value]]),V(B(q),{name:"ApiToken",class:"text-danger"}),Z])]),s("div",ee,[(f(!0),p(E,null,N(_.value,(t,ne)=>(f(),p("div",se,[s("div",oe,[s("p",null,g(t.name),1)]),s("div",te,[s("div",ae,[s("label",{class:"form-check-label",for:t.name},"Active",8,ce),s("input",{class:"form-check-input",type:"checkbox",id:t.name,checked:L(t.ID),onClick:le=>w(t.ID)},null,8,re)])])]))),256))])]),s("div",{class:"row mt-3"},[s("div",{class:"col-12"},[s("button",{type:"button",class:"btn btn-primary",onClick:b},"Save")])])])])])])]))}},_e=y(ie,[["__scopeId","data-v-e3b6c18d"]]);export{_e as default};
