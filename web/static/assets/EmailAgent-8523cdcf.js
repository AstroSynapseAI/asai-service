import{_ as M,D as T,I as w,B as C,r as c,o as U,c as g,x as b,f as e,L as N,C as A,h as E,k as P,F as R,M as l,T as k,y as x,z as B,N as r,q as F,t as J,R as O}from"./index-3bc6b851.js";import{u as $}from"./agent.store-1b5ff091.js";import{u as q}from"./llm.store-5c66f981.js";import{u as z}from"./avatar.store-1b14be5f.js";const a=m=>(F("data-v-65685214"),m=m(),J(),m),H={class:"h3 mb-3"},j={class:"form-check form-switch float-end me-5"},G=a(()=>e("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"Active",-1)),K=["checked"],Q={class:"form-check form-switch float-end me-3"},W=a(()=>e("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"Public",-1)),X=["checked"],Y={class:"card"},Z={class:"card-body"},ee={class:"container-fluid"},te={class:"row"},se={class:"col-6"},oe=a(()=>e("h3",{class:"mb-3"},"Primer",-1)),ae={class:"col-6"},le={class:"row"},ne={class:"col-12"},ie=a(()=>e("h3",{class:"mb-3"},"Agent Model",-1)),ce=a(()=>e("option",{value:"",disabled:"",selected:""},"Select a LLM",-1)),re=["value"],de={class:"row"},pe={clas:"col-12"},ve=a(()=>e("h3",{class:"my-3"},"Email Config",-1)),ue={class:"row"},_e={class:"col-6"},me={class:"form-floating mb-3"},fe=a(()=>e("label",{for:"smtp-server"},"SMTP Server",-1)),he={class:"col-4"},ge={class:"form-floating mb-3"},be=O('<option value="" disabled selected data-v-65685214>Select Encryption Type</option><option value="ssl" data-v-65685214>SSL</option><option value="tls" data-v-65685214>TLS</option><option value="starttls" data-v-65685214>STARTTLS</option><option value="ssltls" data-v-65685214>SSL/TLS</option><option value="none" data-v-65685214>None</option>',6),ye=[be],Se=a(()=>e("label",{for:"smtp-encryption"},"Encryption",-1)),we={class:"col-2"},Ae={class:"form-floating mb-3"},ke=a(()=>e("label",{for:"smtp-port"},"Port",-1)),xe={class:"row"},Le={class:"col-6"},Ve={class:"form-floating mb-3"},De=a(()=>e("label",{for:"smtp-username"},"Username",-1)),Ie={class:"col-6"},Me={class:"form-floating mb-3"},Te=a(()=>e("label",{for:"smtp-password"},"Password",-1)),Ce={class:"row"},Ue={class:"col-6"},Ne={class:"form-floating mb-3"},Ee=a(()=>e("label",{for:"sender"},"Sender",-1)),Pe={class:"col-6"},Re={class:"form-floating mb-3"},Be=a(()=>e("label",{for:"reply-to"},"Reply To",-1)),Fe={__name:"EmailAgent",setup(m){const y=T(),n=z(),h=$(),d=w(h,"record"),i=C(),S=q(),L=w(S,"records"),p=c(""),V=c(""),f=c(""),v=c(!1),u=c(!1),o=c({imap_server:"",smtp_server:"",imap_port:"",smtp_port:"",username:"",password:"",encryption:"",sender:"",reply_to:""}),D=async()=>{const _={ID:parseInt(i.params.active_agent_id),avatar_id:parseInt(i.params.avatar_id),agent_id:parseInt(i.params.agent_id),llm_id:f.value,primer:p.value,is_active:v.value,is_public:u.value,config:JSON.stringify(o.value)};d.value.ID&&(_.ID=d.value.ID);try{await h.saveActiveAgent(_),y.success("Agent configuration saved")}catch(t){console.log(t),y.error("Error while saving agent configuration")}};return U(async()=>{try{await S.getLLMs(),await h.getAgent(i.params.agent_id),p.value=d.value.primer,V.value=d.value.name,i.params.active_agent_id&&(await n.getActiveAgent(i.params.agent_id,i.params.avatar_id),f.value=n.activeAgent.llm_id,p.value=n.activeAgent.primer,v.value=n.activeAgent.is_active,u.value=n.activeAgent.is_public,n.activeAgent.config&&(o.value=JSON.parse(n.activeAgent.config)))}catch(_){console.log(_)}feather.replace()}),(_,t)=>(g(),b(x,null,[e("h1",H,[N("Configure: "+A(d.value.name)+" ",1),e("div",j,[G,e("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault",checked:v.value,onClick:t[0]||(t[0]=s=>v.value=!v.value)},null,8,K)]),e("div",Q,[W,e("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault",checked:u.value,onClick:t[1]||(t[1]=s=>u.value=!u.value)},null,8,X)])]),e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[oe,E(P(R),{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s),name:"agent_primer",type:"text",as:"textarea",class:"form-control",rows:"30",placeholder:"How should the agent behave..."},null,8,["modelValue"])]),e("div",ae,[e("div",le,[e("div",ne,[ie,l(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),class:"form-select model-select","aria-label":"Select Model"},[ce,(g(!0),b(x,null,B(L.value,(s,I)=>(g(),b("option",{value:s.ID,key:I},A(s.name),9,re))),128))],512),[[k,f.value]])])]),e("div",de,[e("div",pe,[ve,e("div",ue,[e("div",_e,[e("div",me,[l(e("input",{type:"text",class:"form-control",id:"smtp-server",placeholder:"mail.example.com","onUpdate:modelValue":t[4]||(t[4]=s=>o.value.smtp_server=s)},null,512),[[r,o.value.smtp_server]]),fe])]),e("div",he,[e("div",ge,[l(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.encryption=s),class:"form-select model-select","aria-label":"Select Model"},ye,512),[[k,o.value.encryption]]),Se])]),e("div",we,[e("div",Ae,[l(e("input",{type:"text",class:"form-control",id:"smtp-port",placeholder:"587","onUpdate:modelValue":t[6]||(t[6]=s=>o.value.smtp_port=s)},null,512),[[r,o.value.smtp_port]]),ke])])]),e("div",xe,[e("div",Le,[e("div",Ve,[l(e("input",{type:"text",class:"form-control",id:"smtp-username",placeholder:"username","onUpdate:modelValue":t[7]||(t[7]=s=>o.value.username=s)},null,512),[[r,o.value.username]]),De])]),e("div",Ie,[e("div",Me,[l(e("input",{type:"password",class:"form-control",id:"smtp-password",placeholder:"password","onUpdate:modelValue":t[8]||(t[8]=s=>o.value.password=s)},null,512),[[r,o.value.password]]),Te])])]),e("div",Ce,[e("div",Ue,[e("div",Ne,[l(e("input",{type:"text",class:"form-control",id:"sender",placeholder:"sender","onUpdate:modelValue":t[9]||(t[9]=s=>o.value.sender=s)},null,512),[[r,o.value.sender]]),Ee])]),e("div",Pe,[e("div",Re,[l(e("input",{type:"text",class:"form-control",id:"reply-to",placeholder:"reply-to","onUpdate:modelValue":t[10]||(t[10]=s=>o.value.reply_to=s)},null,512),[[r,o.value.reply_to]]),Be])])])])])])]),e("div",{class:"row mt-3"},[e("div",{class:"col-12"},[e("button",{type:"button",class:"btn btn-secondary",onClick:D},"Save")])])])])])],64))}},ze=M(Fe,[["__scopeId","data-v-65685214"]]);export{ze as default};
